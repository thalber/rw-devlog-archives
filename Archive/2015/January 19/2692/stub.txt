JLJac
134

@Schrompf yeah I&#039;m doing soft connections, makes things a little less twitchy than if you go with stiff connections in a case like this. I don&#039;t exactly get what you&#039;re saying about pulling in limbs? I do get that it would be pretty simple to have a tentacle that just contracts and then extends along a new path. It could just make itself longer along the path, and when a new path is found it could easily use its own body as a path home, and then get started on the next path. Problem is that if the base of the tentacle is moving, such as in this case, it&#039;d be always contracted. So I need something that rather tries to align with a path in real time.<br><br>@zorg, I pretty much need to animate it all, because the tip and the base of the tentacle are moving simultaneously. But that&#039;s not the problem really - the problem is terrain, or more specifically corners. When the rope is pushed against a corner the segments go separate ways, and end up on different sides of some terrain feature, which causes the rope to get stuck.<br><br><b>Update 382</b><br><br>I think I actually solved it to a degree that&#039;s far from perfect, but which I&#039;m decently happy with. As marcgfx mentioned, we&#039;re hoping for the skinning of the character to make it look better still.<br><br><img src="https://web.archive.org/web/20210309210945im_/http://imgwiz.com/images/2015/01/19/SM6Jg.gif" alt="" border="0"><br><br>Sometimes the solution was super obvious and sitting there all along. Not so this time. Every part of functionality in this thing was hard won through hours of blood, sweat and tears.<br><br><img src="https://web.archive.org/web/20210309210945im_/http://imgwiz.com/images/2015/01/19/I2wN.png" alt="" border="0"><br><br>My head is all dizzy from all the actual freaking <i>thinking </i>I&#039;ve had to do to get to this somewhat okay-ish result.<br><br>Contrary to being obvious my solution is even hard to explain. Hmm. <br><br>Okay, so you see that there&#039;s a semi-transparent &quot;ghost&quot; tentacle? That&#039;s the tile space tentacle. It has pros and cons. Pros - it can never be inside terrain, and the segments are always neighbors, meaning the whole thing is connected from root to tip, in non-solid tiles. Cons - it&#039;s square looking and lack physics features such as gravity. But most notably, when the path changes, it tends to curl up and get really small before extending along the path again. <br><br>Then there&#039;s the float space tentacle, which are the round segments. The idea is basically that the float space tentacle should do it&#039;s thing, looking cool and physicsy, but also draw from the strengths of the tile space tentacle (which is, as we remember, <i><b>not getting stuck in terrain all the goddamn time</b></i>).<br><br>Each float space segment has a buddy in the tile space tentacle, as indicated by the little purple lines. If the float space buddy can see its tile space buddy, it&#039;s pretty much free to float around.<br><br>If not, the float space buddy has been keeping track of every position of its tiles space buddy, like, 60 ticks back. So then it starts to go backwards in that list and raytracing to check if it can see those last positions. The first one it can see, it moves towards.<br><br>This means that the float space tentacle generally does its thing, except when it can&#039;t see its tile space counterpart. In that case it starts to follow like, the ghost of its tile space counterpart, until it catches up. That&#039;s why you can see the float space tentacle kind of mimic the movement of the tile space tentacle, but a little bit delayed, as an obstacle is avoided.<br><br>Pew.