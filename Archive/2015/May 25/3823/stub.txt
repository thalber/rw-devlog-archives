JLJac
191

<b>Update 430</b><br>Have the rain hooked up to the game now, so it goes through some different stages of death rain according to a semi-random pattern. I don&#039;t sweat it too much about a little bit of randomization maybe being unfair, as if you&#039;re out and about as the rain timer reaches zero you&#039;re on borrowed time anyways - you should basically be thankful for each extra second you get&nbsp; <img src="https://web.archive.org/web/20210309173141im_/https://forums.tigsource.com/Smileys/derek/evil.gif" alt="Evil" border="0"> The rain has two distinct fade in behaviors, the more common being that it simply transitions from normal rain into more and more intense rain until you have the death rain. The other one has a &quot;calm before the storm&quot; moment where everything suddenly turns still and quiet, and then instead of fading through normal rain you will first get singular death rain drips which turn more and more dense until the wall of water strikes. I think this latter one will be really cool with the sound!<br><br>Now I have moved on to flash-flooding of underground rooms. The game recognizes three death rain modes, &quot;rain&quot;, &quot;flood&quot; and &quot;flood and rain&quot; - the first two are self explanatory, the latter is for semi-underground rooms where you might want to see rain coming down through a skylight or something, but you&#039;d still want to rely on flooding to actually off the player as the room is too underground-themed for it to make sense with the rain drips in front of the terrain and all that.<br><br>Flooding is going okay - I have moving water surfaces, which took a bit of work to adapt stuff (mostly the waterfalls) to work with, but now it seems to work. Where I&#039;ve run into a bit of resistance is with rooms that don&#039;t have any water in them to start with - a bunch of things are uncomfortable with water suddenly being added to a room for various reasons. I definitely could add water to all rooms, and just have it hibernate off screen or something until the flooding is about to start, but that would seriously mess with my sense of cleanliness haha!<br><br>Another interesting challenge is that it seems like a Futile sprite with a shader that runs a grab pass will run that grab pass even if the sprite is turned invisible, which creates a bit of trouble. Basically the level sprite and the water sprite use the same grab pass, reading from the same register. The rain effects are supposed to do their own grab pass <i>after </i>that, but also write to the same register to save some memory. This has been working fine so far, but with the post-startup added water the order seems to be jumbled, and the water renders after the rain with the wrong stuff in the grab register, turning it opaque. Fun challenges!