JLJac
189

<b>Update 428</b><br><br>We have been talking for a long time about how the black death screen doesn&#039;t really hold up to the visual/interactive standard of the rest of the game, so today I finally got to work on some actual in-game death rain. <br><br><img src="https://web.archive.org/web/20210309173111im_/https://giant.gfycat.com/RequiredEquatorialBrocketdeer.gif" alt="" border="0"><br><br>Obviously still a lot of work to go, but it&#039;s a start! What I&#039;ve got going so far (aside from the start of a rain shader) is basically a texture that shows what parts of the level is sheltered under terrain, and doesn&#039;t render the rain there. Basically the texture is the same size as the room&#039;s tile matrix, with pixels that represent solid tiles or tiles beneath solid tiles as black and others as white. The shader then grabs from that texture, and my usual eternal enemy the automatic smoothing of scaled-up textures actually helps me out this time by softening the edges a bit. <br><br>A concern is the water splashes going through walls, as you can see... I&#039;ll have to figure something out with that. Maybe instead of having a radial splash I could have a directional, and aim it upwards from the surface being hit.<br><br>There are a million tricky design choices that go into this. I was hesitant to even get started on it for a long time because the plants and wires are static, and it feels weird that they don&#039;t move in a situation like this. For that reason I still want the rain to be pretty binary - on or off - instead of a gradual transition, because if the rain is intense enough to mess up the image completely you are less likely to notice the adamantium ferns standing strong against the pounding. <br><br>On the other hand, we want to have some rain-related gameplay going on, fleeing from rain and the like, and that speaks for a more gradual approach where the rain can be there, but you aren&#039;t instantly dead.<br><br>Currently my idea is that the rain first comes in this stage shown above, where you can actually hide under terrain a bit. If you go out into it you should be thrown around pretty badly and drown/get crushed quickly, but scurrying a few tiles through it should be possible (if you can do it in the blind, it&#039;s impossible to see what&#039;s going on out there).<br><br>Then obviously the rain need to step it up a notch from there, or you&#039;d be able to survive by just waiting it out in any old spot such as in the gif, which would undermine our entire game mechanic with shelters etc. What this second step should look like I don&#039;t quite know yet, currently I&#039;m thinking about having it just gradually fade to some sort of all-encompassing complete rain mayhem. That could sort of make sense given the ambiguity of the 2D/3D aspect of the game ~ are these rooms completely closed, or are they open in the front? The answer to that question changes according to what&#039;s convenient for us haha, and in this case I&#039;d probably say that they&#039;re open and as the rain gets really intense it gets in there and smashes everything with general watery violence. <br><br>Then comes the question of the rooms that are very obviously completely underground, what to do there? The current idea is flash flooding, just a water level that rises quickly, and maybe underwater currents that smashes everything into the walls and wreck mayhem on whatever wasn&#039;t quick enough to swim to safety. But I&#039;ll have to get to that when I get to it - outside rain first.<br><br>Another concern I have is that rain like this should generate a whole lot of water, that should be washing around and dripping/pouring everywhere. Currently I don&#039;t really know how to animate that, but it&#039;ll have to happen through shaders somehow. The super realistic scenario would be that the water has an actual fluid simulation going and is just washing along in the corridors, but I really doubt I will be able to make that happen, at least at acceptable performance. So I&#039;ll have to wing it somehow. Stay tuned!