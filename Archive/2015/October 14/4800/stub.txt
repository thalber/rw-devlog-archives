JLJac
240

Code question! I&#039;m working on the save states. Currently the save data of a region looks like this:<br><br><div class="codeheader">Code:</div><div class="code">&lt;A&gt;REGIONSTATE: REGIONNAME_SU&lt;B&gt;SWARMROOMS_111111&lt;B&gt;POPULATION_Slugcat&lt;D&gt;ID.0.0.0&lt;D&gt;0.0&lt;D&gt;&lt;C&gt;GreenLizard&lt;D&gt;ID.3364.0.0&lt;D&gt;198.2&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3363.0.0&lt;D&gt;0.0&lt;D&gt;&lt;C&gt;GreenLizard&lt;D&gt;ID.3371.0.0&lt;D&gt;199.2&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3374.0.0&lt;D&gt;203.2&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3367.0.0&lt;D&gt;0.0&lt;D&gt;&lt;C&gt;GreenLizard&lt;D&gt;ID.3362.0.0&lt;D&gt;207.2&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3372.0.0&lt;D&gt;199.3&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3365.0.0&lt;D&gt;214.3&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3366.0.0&lt;D&gt;214.4&lt;D&gt;&lt;C&gt;GreenLizard&lt;D&gt;ID.3368.0.0&lt;D&gt;215.2&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3373.0.0&lt;D&gt;217.2&lt;D&gt;&lt;C&gt;PinkLizard&lt;D&gt;ID.3370.0.0&lt;D&gt;221.4&lt;D&gt;&lt;C&gt;GreenLizard&lt;D&gt;ID.3369.0.0&lt;D&gt;221.3&lt;D&gt;&lt;C&gt;GreenLizard&lt;D&gt;ID.3375.0.0&lt;D&gt;225.2&lt;D&gt;&lt;C&gt;&lt;B&gt;&lt;A&gt;</div><br>The &lt;A&gt; &lt;B&gt; &lt;C&gt; etc are markers for where to split the string as I decode it.<br><br>I have opted for this way of doing it contrary to serialization because I feel way more in control - I know exactly what I&#039;m storing, how I&#039;m storing it, and if anything goes wrong I can actually track down the bug. Also it makes sure that I don&#039;t store anything more than necessary - with serialization I would worry that some reference somewhere would pull with it an entire chunk of data which I wouldn&#039;t actually want to save.<br><br>So, right now a creature save looks like this:<br>&lt;C&gt;GreenLizard&lt;D&gt;ID.3371.0.0&lt;D&gt;199.2&lt;C&gt;<br>with the key being <br>&lt;C&gt;Creature Type&lt;D&gt;Identification Number&lt;D&gt;Spawn coordinates&lt;C&gt;<br><br>At the end of this, I need to apply the data of something I call a &quot;Creature State&quot;. The creature state contains info on the critter&#039;s health, and a bunch of other stuff. Some critters have social memory which they use to keep track of relationships to you and each other - this also goes in the creature state.<br><br>The problem is that different critters have derived state classes that may contain some extra critter-specific info.<br><br>So now I&#039;m thinking, should I just tough it out and write a state-to-string method and a string-to-state method for each critter type, or should I serialize this specific piece of data? Then I&#039;d get a mixture of clear text and binary serialization in the saved creature, like this:<br><br>&lt;C&gt;GreenLizard&lt;D&gt;ID.3371.0.0&lt;D&gt;199.2&lt;D&gt;MQCAACbAgAA0wEoBINARYoSERIALIZATIONoSTRINGoAAAwCAAAAAgAA7&lt;C&gt;<br><br>My question is - is that just <i>too</i> ugly to even consider? And would it actually do me any good? 