JLJac
107

<b>Update 336</b><br>Den awareness! The lizards (and other future creatures) can now keep track of a home den. If they don&#039;t have one, there&#039;s a routine that looks for the closest one throughout the world map. Whenever the lizard re-maps movement territory (&quot;it seems I&#039;m in a tile that I had mapped as inaccessible, I should do a new flood fill to check what tiles are actually accessible to me&quot;) it also restarts this routine. If the routine runs out of options, it&#039;ll tell the lizard that it&#039;s stranded - in an area from where it can not reach any den. I think it could be pretty cool to have creatures panic if they&#039;re in this situation when the rain comes. Otherwise, it finds a new den and remembers that one as its home base instead.<br><br>Here&#039;s a lizard catching a slugcat and heading back home with it. Excuse the slugcat being on top of the lizard&#039;s snout in the later rooms, I haven&#039;t gotten around to moving it in there for situations where the grasp exists on spawning the creatures.<br><br><img src="https://web.archive.org/web/20141227133859im_/http://imgwiz.com/images/2014/10/13/nr6S.gif" alt="" border="0"><br><br>As always in Rain World it&#039;s assumed that the AI entity is omniscient about the level geometry - having them be unsure of what&#039;s where would be a nightmare to program and it would pretty much only amount in obscuring the intelligent behaviors I&#039;ve painstakingly put in. <br><br>Also, I now theoretically have support for fleeing from rain! It was really simple, I just added another Utility to the lizards decision making machinery. Currently I have it following this Urgency/Utility curve over time as the rain approaches:<br><br><img src="https://web.archive.org/web/20141227133859im_/http://imgwiz.com/images/2014/10/13/JLB1Z.png" alt="" border="0"><br><br>But I think that in the future it would probably make sense for it to take distance from the den into account instead of only time. It should probably be a simple division, how far am I from home / how much time is there left. So, more refinements to come, but the basic behavior is in.<br><br>What&#039;s not in though, is creatures actually being able to <i>be </i>in dens. Now they just weirdly pop in and out of them over and over again. I think this won&#039;t be a huge task though (touch wood), I&#039;ll just keep them in &quot;shortcut mode&quot; while allowing them to interact with some sort of Inside Of Den class, which can allow them to drop off some food, wait for a bit, or whatever it is they want to do. <br><br>It seems it&#039;s not far away that we have the player hunting and fleeing, and AI creatures hunting, fleeing and taking cover from the rain! That&#039;d be the most basic gameplay mechanics, all working and interacting with each other!