JLJac
123

Hm, well, rather the opposite in that case. When the cycle starts all the rain water would be draining away, so then you&#039;d see a lot of running water, but later it&#039;d be less and less during the dry spell. This would require the waterfalls to be no-collision though, as we took the decision to have static terrain a couple of months ago when the AI started using pre baked map data. <br><br>Bringing the update to the next page.<br><br><div class="quoteheader"><a href="https://web.archive.org/web/20141211031329/http://forums.tigsource.com/index.php?topic=25183.msg1089753#msg1089753">Quote from: JLJac on December 08, 2014, 03:20:04 AM</a></div><div class="quote">Thanks <img src="https://web.archive.org/web/20141211031329im_/http://forums.tigsource.com/Smileys/derek/smiley.gif" alt="Smiley" border="0"><br><br><b>Update 372</b><br><br>Waterfalls! Note, work in progress ~ I could still be happier with how it looks under the water line. Things are becoming tricky, as I have like 4 different shaders colliding and overlapping here. The dark bubbles under the surface would be a lighter color if I could choose freely, but I have to draw them in the default sprite layer, and then they&#039;ll also get the default underwater color. I&#039;ll try to mess around with it some more in the future, but this seems good enough as a place holder to get James started with the new watery area.<br><br><img src="https://web.archive.org/web/20141211031329im_/http://imgwiz.com/images/2014/12/08/oBW74.gif" alt="" border="0"> <img src="https://web.archive.org/web/20141211031329im_/http://imgwiz.com/images/2014/12/08/cEHhK.gif" alt="" border="0"><br><br>The left one is a standard waterfall, as I imagine most of them will look. The right one is a weaker one that&#039;s a bit broken up, I want this for cosmetic purposes. The standard one looks very square, so the weaker one can be used to make a room look more alive. Both of them could use some more work though! Let me know if you have any tips <img src="https://web.archive.org/web/20141211031329im_/http://forums.tigsource.com/Smileys/derek/smiley.gif" alt="Smiley" border="0"><br><br>Right now the waterfall affects you while you&#039;re in the water - if you&#039;re close to the surface it&#039;ll pull you in and push you down, further down it will push you down and away. Above water it&#039;s purely cosmetic, you don&#039;t collide with it but move &quot;in front of it&quot;. I&#039;m contemplating making it so that the waterfall hits creatures above water as well, and pushes them down. There are a few things to consider here though. First of all, could I make the creature/water interaction look good enough to be happy with it? It&#039;d want some kind of water splatter, and that seems very difficult to implement in a way that looks good. Also the waterfall should probably be affected somehow. This could probably be accomplished by breaking the sprite up in two where the creature breaks the waterfall, and use the weak shader (right in the images above) below that point. But there are also gameplay implications. Waterfalls generally cut rooms up horizontally, and if they are (somewhat) an obstacle, rooms might feel claustrophobic as you&#039;ll find yourself locked into little cells without freedom of movement. This might be okay for the player, but lighter creatures such as bats will get pushed around more by the waterfalls, and be even more limited as a consequence. Bat movement might be incredibly limited if the room is cut up by vertical barriers that the player can move through but the bats can&#039;t. So, still thinking about that one. Will consult with James and get back!<br><br>In shader news, you might notice a some water glimmer on the walls. Adds some atmosphere according to me! I&#039;m really going crazy with the shaders here, but this one is actually not baked into the main shader, it&#039;s just a sprite that&#039;s placed on top of everything. So some graphics options can easily be implemented where that sprite is simply not created, and the GPU can be spared some pain and suffering. The effect is not for an entire room, but only above water surfaces and extending a few hundred pixels upwards. <br><br>And yeah, I made the leeches red!<br><br><img src="https://web.archive.org/web/20141211031329im_/http://imgwiz.com/images/2014/12/08/XGwdN.gif" alt="" border="0"><br><br>An artistic decision I guess. Almost every creature is black already, and it felt nice to spice the leeches up a bit. I really like the contrast between the red leeches and this green water here - it feels a bit more fun and unexpected than just black. Also, the leeches spend most of their time deep under water, where you won&#039;t see their color, so it becomes a bit of a surprise when they get closer to the surface.<br><br>When they&#039;re out of the water for a while they slowly turn black before dying of dehydration.<br><br>We were talking about perhaps having both black leeches and red leeches, and giving them slightly different properties, and that&#039;s not entirely out of the question, but probably a later issue.<br></div>