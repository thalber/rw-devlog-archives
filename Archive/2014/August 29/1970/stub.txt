JLJac
98

Thanks for the awesome input guys!<br><br>@Christian, that&#039;s a good idea. The problem is that the tracker is on another scale, it operates tile by tile, while the feet are pixel by pixel. Also the lizard knows where it is going most of the time (forward) but in some scenarios such as turning around the prediction turns out wrong - it can try to predict, but it can&#039;t see the future!<br><br>@Gimym JIMBERT, as always, thanks a thousand times for the interesting resources!<br><br>@Lee, wow! That&#039;s awesome! Actually what you describe seems rather close to what I have, except that you describe some kind of &quot;overmind&quot; controlling all the four limbs, making sure that they move cross-wise etc. In my solution the limbs are more autonomous, which has good parts and bad parts. The good part is that they are less static - they don&#039;t need permisson to move, making the movement less of an &quot;animation&quot; and more intelligent. The bad part is that they&#039;re not intelligent, and I end up with stupid bugs. I actually implemented something similar to your solution, but instead of placing it in a coordinator object I connected the feet into pairs and enabled them to know some stuff about their partner, changing their behavior depending on what the partner is up to.<br><br><b>Update 300</b><br>Ok, so I haven&#039;t really had a huge break through, but I&#039;ve moved forward through blood sweat and tears instead. The new solution has many little mechanics in it, but the core difference is this: The <i>first </i>time a limb tries to find a reach position, it reaches too far in front of itself, to where it expects the body to be in the next couple of frames. If the body does catch up and the position actually becomes reachable, all is good, it goes there and grabs the terrain.<br><br>If the lizard changes direction or some other weirdness however, so the target never becomes reachable, a counter starts to tick. Every frame that the reach target is outside of the limb&#039;s reach this counter increases. When it reaches a certain number (I used 15 frames) the limb decides that OK, this target is probably not going to be within reach, ever. It then tries to find a new target, this time playing it super safe, only going for terrain that is strictly within reach. <br><br>On top of this other systems are implemented to smoothen the walk cycle. One such is that if every limb is grabbing terrain, the one that has been doing so the longest will automatically let go and go find a new target. This keeps all four limbs from syncing up in the same cycle of grabbing and moving.<br><br>Another one is that the front limbs and hind limbs are connected into pairs. Or rather, one of them is aware of the other. The one hind leg that knows about the other hind leg will try to be at the opposite of the other&#039;s cycle, and the same for the front legs.<br><br>Slow motion of pink lizard moving (and looking up, I have my mouse pointer up there):<br><br><img src="https://web.archive.org/web/20141227124122im_/http://imgwiz.com/images/2014/08/29/xNwK0.gif" alt="" border="0"><br><br>The steps are longer, and the movement is smoother. There are still problems in more complex terrain though, but I feel this is a good start. <br><br>For the green lizard I don&#039;t want the movement to be smooth, and have allowed the limbs to sync up:<br><br><img src="https://web.archive.org/web/20141227124122im_/http://imgwiz.com/images/2014/08/29/0ach.gif" alt="" border="0"><br><br>I&#039;m still not entirely happy with it though. The legs should move at the same time, but not sync up so perfectly. I&#039;ll look into making them have just slightly different grabbing targets. Also the foot should obviously not move above the hip making the leg turn like a wheel.<br><br>The blue lizard takes smaller steps. It looks kind of strange now because the limbs are as big as those of the others - that&#039;ll become more proportional once I get the movement down.<br><br><img src="https://web.archive.org/web/20141227124122im_/http://imgwiz.com/images/2014/08/29/IiHxz.gif" alt="" border="0"><br><br>In 2D terrain that isn&#039;t just a flat floor many of the problems become evident. The limbs have a bit of flailing, and some hesitation when they try to reach for terrain but fail and change their minds. For these specific climbing scenarios the limb movement actually looked better before I made the changes, so I&#039;m contemplating making some kind of differentiation between floor crawling and climbing and using different systems for limb movement depending on the situation.<br><br>Hahaha and also, I&#039;ve finally encountered the backside of inheritance! All this messing around with the limb code has somehow made the poor slugcat&#039;s arms disappear! Don&#039;t worry though, all the code I wrote is intact, so getting them back again will probably be a quick fix <img src="https://web.archive.org/web/20141227124122im_/http://forums.tigsource.com/Smileys/derek/smiley.gif" alt="Smiley" border="0"><br><br>Getting there!<br><br><br><b>Another thing!</b><br>Monday I&#039;m going to do some serious relocating of myself to way over in Seoul! The idea is that I should get to work as quickly as possible, but there will probably be a lack of updates at the beginning of next week. Travelling will take something like a day and a half in itself, then comes being jetlagged, re-adjusting, finding somewhere to sit and work, etc etc. But by the end of next week I hope to be back in business!<br><br>&#50504;&#45397;&#55176;&#44032;&#49464;&#50836;!