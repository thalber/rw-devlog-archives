JLJac
95

<b>Update 284</b><br>When reaching a road fork, where one option is considered ideal and the other slightly less so, a ghost is now able to clone itself. The clone gets a slightly lower score, which is accounted for in the eventual <i>ghost ranking process</i>.<br><br>Ghosts travel slowly, as we want creatures to assume that their prey is at least somewhere close to where they lost it. Over a large amount of time however, the ghosts will travel to pretty much all corners of the world, which means that a creature that has been long lost will be looked for in much more diverse locations than one that disappeared around a corner just two seconds ago. Each time a ghost travels, it will check if it is in the line of sight of the creature inside which&#039;s head it&#039;s living. If so, it&#039;ll freeze in place - it wouldn&#039;t make sense for the the creature to assume that the prey could have traversed any distance that is actually visible to it.<br><br>In this gif (trying yet another hosting service, hope this one will work for everyone!) you can see a (stuck) lizard lose track of a slugcat. Notice how after time has been sped up, the possible locations are scattered all over the lower left area, but also contained within the area which is not visible to the lizard. It knows the slugcat has to be in there <i>somewhere</i>, but becomes less and less sure of exactly where as time goes by. Here the ghost count is capped at 15, I think the actual game would generally use fewer.<br><br><img src="https://web.archive.org/web/20141225201523im_/http://giant.gfycat.com/GeneralIncompleteIndianjackal.gif" alt="" border="0"><br><br>When the slugcat is actually seen, all ghosts except one are removed. The ghost that&#039;s slightly larger and pulsating is the one that&#039;s considered the best guess for where the slugcat might be. This is where the ranking comes into play. The ghost score has several things feeding into it. Traveling in the same general direction as the tracked creature was last seen moving in is one, proximity to the last seen coordinate and the tracking creature are others, intended to make search behaviors look more reasonable. The search behavior will probably be mainly about going after this &quot;best bet&quot; ghost until all of them are gone. <br><br>When the lizard is moved close to the ghosts, they disappear. Note that they don&#039;t disappear as soon as the lizard is able to see them, but the lizard has to be somewhat close as well. This is for a few different reasons. One is that when the ghost cap is reached, and a ghost reaches a road fork, it won&#039;t pick one direction, but instead just freeze in place (seemed more reasonable to me to stop at the crossroads rather than picking an option at random that would take you even further away from where the creature was last spotted). Another is that the ghosts are not in every tile in the possible area, like an actual Occupancy Probability Grid. Both of these are generally the same concept; that these ghost coordinates are not <i>strictly </i>&quot;places where I believe the creature to be&quot;, but rather &quot;places that would be a good idea to <i>go </i>when searching for this creature&quot; if you get the distinction. The latter can&#039;t just be dismissed at a glance, but takes some examination before its hypothesis can be falsified. <br><br>Many of the parameters for this whole thing can be customized, such as the max amount of ghosts per tracked creature, the speed of the ghosts (as a fraction of the tracked creature&#039;s average speed - I imagine I&#039;ll generally want the ghosts to move slower than the actual creatures as a conservative guess that&#039;s closer to the last seen coordinate is better than a wild guess) etc.<br><br>Ideally this system should also be inter-room, so that a ghost could pass through a shortcut into a neighboring room&nbsp; - this I haven&#039;t implemented yet. But generally I&#039;m happy with the system. I will however add some functionality to dumb it down to work better for the slightly thicker creatures. An example would be that a dumb green lizard probably shouldn&#039;t be able to be too clever about how you&#039;re able to climb and it&#039;s not. Instead it should assume that you have the same limitations it has, and emulate your ghosts with its own terrain preferences. That way when you climb up and away from the area it&#039;s searching, the proper reaction should be confusion.